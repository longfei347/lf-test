<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="divport" content="width=device-width">
  <title>Test1</title>
  <script src="js/j.js"></script>
  <!-- <script src="js/underscore.js"></script>
  <script src="js/require.js"></script>
  <script src="js/lite2.js"></script>
  <script src="js/jquery.cookie.js"></script> -->
  <link href="css/style.css" rel="stylesheet">
  <style>
  #demo {
    position: relative;
    width: 100px;
    height: 100px;
    background-color: #33f;
    overflow: auto;
  }
  input[type=checkbox][disabled] {
    width: 30px;
    height: 30px;
  }

  .sanjiao {
    position: relative;
    display: inline-block;
    height: 60px;
    width: 30px;
    background-color: #ccc;
    border: 40px solid;
    border-color: red green blue yellow;
  }

  .entry {
    margin-left: 30px;
    width: 280px;
    background: #fff;
    border-radius: 5px;
  }

  .entry-trangle {
    position: absolute;
    margin-top: 5px;
    margin-left: -14px;
    width: 0;
    height: 0;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-right: 10px solid #f90;
    z-index: -1;
  }

  [class^="long_"] {
    width: 20px;
    height: 20px;
  }
  .positionDiv {
    position: absolute;
    width: 75px;
    height: 75px;
    background: green;
  }

  input::selection {
    background-color: #f90;
  }

  ::selection {
    background-color: #e60;
  }
  /* select:hover {
      background-color: #f90;
    } */

  select:hover {
    background-color: #eee;
  }
  #message:before {
    content: "复制内容:";
    color: #f00;
  }
  .arrow-left {
    width: 26px;
    height: 26px;
    display: inline-block;
    position: relative;
    cursor: pointer;
    background-color: grey;
  }
  .arrow-left:before, .arrow-left:after {
    height: 1px;
    width: 14px;
    content: '';
    background: #FFF;
    position: absolute;
    left: 0px;
    top: 50%;
    transform-origin: 100% 0%;
    transform: rotate(45deg);
  }
  .arrow-left:after {
    transform: rotate(-45deg);
  }
  .left-out {
    display: inline-block;
    height: 26px;
    width: 26px;
    background-color: #d93;
  }

  .triangle-facing-left {
    display: inline-block;
    margin-left: 5px;
    border-left: 2px solid #666;
    border-bottom: 2px solid #666;
    width: 14px;
    height: 14px;
    transform: rotate(45deg);
    /* transform-origin: center bottom; */
  }
  .arr-left {
    display: inline-block;
    width: 26px;
    height: 26px;
    background-color: #e85;
  }
  .arr-left:after {
    display: block;
    margin-left: 5px;
    margin-top: 5px;
    content: '';
    width: 14px;
    height: 14px;
    transform: rotate(45deg);
    /* transform-origin: center bottom; */
    border-left: 1px solid #333;
    border-bottom: 1px solid #333;
  }
  .muti-line {
    position: relative;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
    overflow: hidden;
  }
  .muti-line:after {
    content: '';
    position: absolute;
    margin-left: -19px;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid #f90;
    z-index: -1;
  }
  .m-line {
    position: relative;
    width: 900px;
    height: 50px;
    text-overflow: ellipsis;
    overflow: hidden;
  }
  .m-line span {
    position: absolute;
    right: 0;
    bottom: 0;
    background-color: #fff;
  }
  .m-line span {
    content: '';
    position: absolute;
    margin-left: -19px;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid #f90;
  }
  .m-line .fold {
    border-bottom: 10px solid #f90;
    border-top: none;
  }
  .ff {
    position: relative;
    width: 16px;
    height: 30px;
    background-color: #fff;
  }
  .ff .left {
    position: absolute;
    left: 0;
    width: 0;
    height: 0;
    border-top: 30px solid #FF3C69;
    border-right: 14px solid transparent;
  }
  .ff .right {
    position: absolute;
    right: 0;
    width: 0;
    height: 0;
    border-bottom: 30px solid #3034A2;
    border-left: 14px solid transparent;
  }
  </style>
</head>

<body>
  <p class="m-line">
    适用范围：
    因使用了WebKit的CSS扩展属性，该方法适用于WebKit浏览器及移动端；
    注：
    -webkit-line-clamp用来限制在一个块元素显示的文本的行数。 为了实现该效果，它需要组合其他的WebKit属性。常见结合属性：
    display: -webkit-box; 必须结合的属性 ，将对象作为弹性伸缩盒子模型显示 。
    -webkit-box-orient 必须结合的属性 ，设置或检索伸缩盒对象的子元素的排列方式 。
    <span></span>
  </p>
  <!-- <video src="aaa.mp4" controls=""></video> -->
  <div class="df">
    <div class="ff">
      <div class="left"></div>
      <div class="right"></div>
    </div>
    <div class="arr-left"></div>
    <div class="left-out">
      <div class="triangle-facing-left"></div>
    </div>
    <div class="arrow-left"></div>
    <div class="entry">
      <div class="entry-trangle"></div>
      hello，我出生了
    </div>
  </div>
  <!-- <input type="file" accept="image/*" capture="camera">
  <input type="file" accept="video/*" capture="camcorder">
  <input type="file" accept="audio/*" capture="microphone"> -->
  <form action="">
    <input type="text" id="input">
    <input type="text" name="aa" id="" value="<!@#1%^&*()_+">
    <div class="df">
      <div class="sanjiao"></div>
      <div id="demo"> </div>
    </div>
  </form>
  <div id="message"></div>
  <div id="logs"></div>
</body>
<script>
// 'use strict';
// $.get('http://rap2api.taobao.org/app/mock/226903/test/aaa').then(res=>console.log(res))
$('.m-line span').on('click', function(e) {
  if (this.className === 'fold') {
    this.classList.remove('fold')
    $('.m-line').css('height', '50px')
  } else {
    this.classList.add('fold')
    $('.m-line').css('height', 'auto')
  }
  /*if (this.innerHTML === ' ...展开') {
    this.innerHTML = ' ...折叠'
    $('.m-line').css('height', 'auto')
  } else {
    this.innerHTML = ' ...展开'
    $('.m-line').css('height', '50px')
  }*/
})

const input = document.getElementById('input');
const p = document.getElementById('demo');
var obj = {};

const newObj = new Proxy(obj, {
  get: function(target, key, receiver) {
    console.log(`getting ${key}!`);
    return Reflect.get(target, key, receiver);
  },
  set: function(target, key, value, receiver) {
    console.log(target, key, value, receiver);
    if (key === 'text') {
      input.value = value;
      p.innerHTML = value;
    }
    return Reflect.set(target, key, value, receiver);
  },
});

input.addEventListener('keyup', function(e) {
  newObj.text = e.target.value;
});
/*function ll({ title = '123', text = 'haha' }) {
  console.log(title, text)
}
ll({ title: '112233' })

var a = { n: 1 };
var b = a;
a.x = a = { n: 2 };
//console.log(a.x);
//console.log(b.x);
! function() {
  var aa = bb = cc = 0; //等价于var aa=(bb=(cc=0)) cc=0 即全局变量为0,表达式返回0 赋给b,再返回0赋给a
}()*/

/*Function.prototype.uncurrying = function() {
    var _this = this;
    return function() {
        return Function.prototype.call.apply(_this, arguments);
        //在下面的例子中Array.prototype.push == _this
        //因为call 本身也是个函数
        //Function.prototype.call.apply 就是去调用call()方法
        //也就是Array.prototype.push.call(arguments);
        //例子中push(arr,"a") arguments 就是[arr,"a"];
        //所以实际上到最后我们得到的是
        //Array.prototype.push.call(arr , "a");
        //即 arr.push("a")
    };
};
function uncurrying(fn) {
    return function() {
        return Function.prototype.call.apply(fn, arguments);
    }
} <===>等价于
 function uncurrying(fn) {
    return function() {
        var context = [].shift.call(arguments);
        fn.apply(context, arguments);
    }
}
var push = Array.prototype.push.uncurrying();
var obj = {};
push(obj, "a",'b','d');//Object {0: "a", 1: "b", length: 2}
console.log(obj);*/
/*var promiseCount = 0;
function testPromise() {
  var thisPromiseCount = ++promiseCount;

  var log = document.getElementById('logs');
  log.insertAdjacentHTML('beforeend', thisPromiseCount + ') 开始(同步代码开始)<br/>');

  // 我们创建一个新的promise: 然后用'result'字符串完成这个promise (3秒后)
  var p1 = new Promise(function(resolve, reject) {
    // 完成函数带着完成（resolve）或拒绝（reject）promise的能力被执行
    log.insertAdjacentHTML('beforeend', thisPromiseCount + ') Promise开始(异步代码开始)<br/>');

    // 这只是个创建异步完成的示例
    window.setTimeout(function() {
      // 我们满足（fullfil）了这个promise!
      resolve(thisPromiseCount)
    }, Math.random() * 2000 + 1000);
  });

  // 定义当promise被满足时应做什么
  p1.then(function(val) {
    // 输出一段信息和一个值
    log.insertAdjacentHTML('beforeend', val + ') Promise被满足了(异步代码结束)<br/>');
  });

  log.insertAdjacentHTML('beforeend', thisPromiseCount + ') 建立了Promise(同步代码结束)<br/><br/>');
}
testPromise()*/
/*function $http(url) {
  // A small example of object
  var core = {
    // Method that performs the ajax request
    ajax: function(method, url, args) {
      // Creating a promise
      var promise = new Promise(function(resolve, reject) {
        // Instantiates the XMLHttpRequest
        var client = new XMLHttpRequest();
        var uri = url;

        if (args && (method === 'POST' || method === 'PUT')) {
          uri += '?';
          var argcount = 0;
          for (var key in args) {
            if (args.hasOwnProperty(key)) {
              if (argcount++) {
                uri += '&';
              }
              uri += encodeURIComponent(key) + '=' + encodeURIComponent(args[key]);
            }
          }
        }
        client.open(method, uri);
        client.send();

        client.onload = function() {
          if (this.status >= 200 && this.status < 300) {
            // Performs the function "resolve" when this.status is equal to 2xx
            resolve(this.response);
          } else {
            // Performs the function "reject" when this.status is different than 2xx
            reject(this.statusText);
          }
        };
        client.onerror = function() {
          reject(this.statusText);
        };
      });
      // Return the promise
      return promise;
    }
  };

  // Adapter pattern
  return {
    'get': function(args) {
      return core.ajax('GET', url, args);
    },
    'post': function(args) {
      return core.ajax('POST', url, args);
    },
    'put': function(args) {
      return core.ajax('PUT', url, args);
    },
    'delete': function(args) {
      return core.ajax('DELETE', url, args);
    }
  };
};
// End A

// B-> Here you define its functions and its payload
var mdnAPI = 'https://developer.mozilla.org/en-US/search.json';
var payload = {
  'topic': 'js',
  'q': 'Promise'
};

var callback = {
  success: function(data) {
    console.log(1, 'success', JSON.parse(data));
  },
  error: function(data) {
    throw(data);
    console.log(2, 'error');
  }
};
// End B

// Executes the method call
$http(mdnAPI)
  .get(payload)
  .then(callback.success)
  .catch(callback.error);

// Executes the method call but an alternative way (1) to handle Promise Reject case
$http(mdnAPI)
  .get(payload)
  .then(callback.success, callback.error);

// Executes the method call but an alternative way (2) to handle Promise Reject case
$http(mdnAPI)
  .get(payload)
  .then(callback.success)
  .then(undefined, callback.error);*/

/*$("body").on({
  copy: function(e) { //copy事件
    var cpTxt = "",
      clipboardData = window.clipboardData; //for IE
    if (!clipboardData) { // for chrome
      clipboardData = e.originalEvent.clipboardData;
    }
    cpTxt = clipboardData.getData('text')||"复制的数据";//可以获取用户选中复制的数据
    clipboardData.setData('Text', cpTxt);
    $('#message').text('Copy Data : ' + cpTxt);
    return false; //否则设不生效
  },
  paste: function(e) { //paste事件
    var eve = e.originalEvent
    var data = null;
    var clipboardData = window.clipboardData || e.originalEvent.clipboardData; // IE
    data = clipboardData.getData('Text');
    $('#message').html(data);
  }
})*/
/*var defer = $.Deferred(function(resolve) {
  setTimeout(function(argument) {
    console.log(12);
  }, 500)
}).then(function(val) {
  console.log(11)
})
*/
/*var p1 = new Promise(function (resolve, reject) {
  setTimeout(() => reject(new Error('fail')), 3000)
})
var p2 = new Promise(function (resolve, reject) {
  setTimeout(() => resolve(p1), 1000)
})
p2.then(result => console.log(result))
p2.catch(error => console.log(error))*/
/*
var pro = new Promise(function (resolve, reject) {
  var flag = false;
  setTimeout(function() {
    resolve("haha");
  },2000)

})*/

/*var getJSON = function(url) {
  var promise = new Promise(function(resolve, reject) {
    var client = new XMLHttpRequest();
    client.open("GET", url);
    client.onreadystatechange = handler;
    client.responseType = "json";
    client.setRequestHeader("Accept", "application/json");
    client.send();

    function handler() {
      if (this.readyState !== 4) {
        return;
      }
      if (this.status === 200) {
        resolve(this.response);
      } else {
        reject(new Error(this.statusText));
      }
    };
  });

  return promise;
};

getJSON("https://developer.mozilla.org/en-US/search.json").then(function(json) {
  console.log('Contents: ' + json);
}, function(error) {
  console.error('出错了', error);
});*/

//如果当前浏览器不支持requestAnimationFrame和cancelAnimationFrame，则会退到setTimeout
if ( !requestAnimationFrame || !cancelAnimationFrame ) {
  function requestAnimationFrame (callback, element) {
    var currTime = new Date().getTime();
    //为了使setTimteout的尽可能的接近每秒60帧的效果
    var timeToCall = Math.max(0, 16 - (currTime - lastTime));
    var id = window.setTimeout(function() {
      // console.log(timeToCall);
      callback(currTime + timeToCall);
    }, 2);
    lastTime = currTime + timeToCall;
    return id;
  };

  cancelAnimationFrame = function(id) {
    window.clearTimeout(id);
  };
}
var demo = document.getElementById('demo'),start = null;
function step(timestamp) {
  if (!start) start = timestamp;
  var progress = timestamp - start;
  demo.style.left = Math.min(progress / 10, 200) + 'px';
  // console.count(timestamp)
  if (progress < 2000) {
    window.requestAnimationFrame(step);
  }
}
// window.requestAnimationFrame(step);


//"use strict"
/*// document.body.onselectstart=function() {return false;}
document.body.oncontextmenu=function() {
  console.log('oncontextmenu')
  return false;
}
*/
/*var Un;
(function () {
  var ins;
  Un = function() {
    if (ins) {
      return ins;
    }
    ins = this;

    this.start_time = 0;
    this.bang = "big";
    console.log(this)
  }
}())*/

/*function Universe(arg) {
  var instance;
  Universe = function(a) {
    console.log(a)
    return instance;
  }
  Universe.prototype = this;
  instance = new Universe(100);
  instance.constructor = Universe;
  instance.start_time = 0;
  instance.bang = "Big";
  return instance;
}
Universe.prototype.nothing = true;
var uni = new Universe();
Universe.prototype.everything = true;
var uni2 = new Universe(2);
console.log(uni === uni2)*/
/*var v1 = "abc";
var v2 = true;
var v3 = 10;
var v4 = Symbol("foo")
var v5 = 2;

var obj = Object.assign({}, v1, null, v2, undefined, v3, v4);
// 原始类型会被包装，null 和 undefined 会被忽略。
// 注意，只有字符串的包装对象才可能有自身可枚举属性。
console.log(obj); // { "0": "a", "1": "b", "2": "c" }*/
// console.log(Object.assign({},v2,v3)); //{}

/*
//死循环
for (;1;) {
  console.log(1)
}
while(true) {
  console.log(1);
}*/
/*var i="10000000000";
for (var j=0;j<Number.MAX_VALUE;j++) {
  i+=i;
  console.log(i)
}*/
/*!function() {
  var a = b = c = 0;
  var D2016 = new Date(2016,5,1)
  setInterval(function(){
    var D = new Date(), val = Math.round((D2016.getTime() - D.getTime())/1000),
      daytimes = val%(86400),//60*60*24
      days = Math.floor(val/86400),
      hours = Math.floor(daytimes/3600)%24,
      minutes = Math.floor(daytimes/60)%60,
      seconds = daytimes%60;
      $("#time").html("还剩"+days+"天, "+hours+"时, "+minutes+"分, "+seconds+"秒")
  }, 1000);
}();*/
/*if(!Function.prototype.bind) {
  Function.prototype.bind = function(oThis) {
    if (typeof this !== 'function') {
      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
    }
    var fSlice = [].slice,
      aArgs = fSlice.call(arguments, 1),
      fToBind = this,
      fNOP = function() {},
      fBound = function() {
        return fToBind.apply(this instanceof fNOP ? this : oThis || window, aArgs.concat(fSlice.call(arguments)));
      };

    fNOP.prototype = this.prototype;
    fBound.prototype = new fNOP();
    return fBound;
  };
}*/

/*function foo(x = 5) {
  // let x = 1; // error
  // const x = 2; // error
  var x=10;
  console.log(x)
}
foo(3);*/
/*// 写法一
function m1({x = 0, y = 0 } = {}) {
  return [x, y];
}

// 写法二
function m2({x, y } = {x: 0, y: 0 }) {
  return [x, y];
}*/
/*var n={
  ii(){
    console.log('ii')
  }
}
var h={
  i(){
    console.log('i')
  },
  __proto__:n
}
var l={
  f(){},
  __proto__:h
}*/
/*var arg = [1, 2, 3, 4, 6, 8];
//(function() {console.log(...arguments)}).apply(null, arg) 同下
(function() {
  var i = 0,
    len = arguments.length
  for (; i < len; i++) {
    console.log(arguments[i])
  }
}).call(null, ...arg)*/
</script>

</html>
