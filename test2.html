<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Test2</title>
	<script src="js/jquery.js"></script>
	<!-- <script type="module" src="js/test.js"></script> -->
	<!-- <script src="NetworkBundleActivity.js"></script> -->
	<!-- <script src="js/base.js"></script>
	<script src="js/lodash.js"></script>
	<script src="js/angular.js"></script> -->
	<script src="js/_30s.js"></script>
	<script src="js/base.js"></script>
	<script src="js/axios.js"></script>
</head>
<style>
	.postTitle a {
		font-size: 14px;
		display: inline-block;
	}

	body {
		line-height: 2;
		/* -webkit-font-smoothing: antialiased;
	-webkit-text-stroke-width: 0.2px;
	-moz-osx-font-smoothing: grayscale; */
	}



	/* ul {
	transform: rotate(180deg)
	}

	li {
	transform: rotate(180deg)
	} */

	.item {
		display: inline-block;
		width: 100px;
	}

	.btn-tt {
		position: absolute;
		left: 20px;
		top: 20px;
		height: 30px;
		width: 50px;
		background-color: #f90;
		z-index: 100;
	}
	.none {
		display: none;
	}
	/* ::-webkit-scrollbar-track-piece {
	background-color: #fff;
	-webkit-border-radius: 0;
	}

	::-webkit-scrollbar {
	width: 8px;
	height: 8px;
	}
	::-webkit-scrollbar-thumb {
	height: 50px;
	background-color: #999;
	-webkit-border-radius: 4px;
	outline: 2px solid #fff;
	outline-offset: -2px;
	border: 2px solid #fff;
	}
	::-webkit-scrollbar-thumb:hover {
	height: 50px;
	background-color: #9f9f9f;
	-webkit-border-radius: 4px;
	} */

	form {
		height: 100px;
		/*-webkit-appearance: button;*/
		overflow: auto;
	}
	.btn {
		height: 30px;
		/*-webkit-appearance: button;
		outline: 5px solid #f90;
		resize: both;
		outline-offset: 2px; */
		border: none;
		box-sizing: border-box;
		background-color: #09f;
	}
	ol {
		margin: 0;
		padding: 0 0 0 2em;
		list-style: none;
		counter-reset: item;
	}
	form {
		min-height: 100px;
	}
	long {
		font-size: 18px;
		color: #f90;
	}
	@supports (-webkit-appearance: none) {
	  #chrome_detect::after {
	    /* content: url('images/001.gif'); */
	    content: attr(title);
	    color:red;
	  }
	}
	#demo:target{color:#f00;}
	.loading{
		border: 3px dashed #000;
		width: 20px;
		height: 20px;
		border-radius: 50%;
		border-color: #f90;
		border-bottom-color: transparent;
		animation: ddd 1s linear infinite;

	}
	@keyframes ddd {
		0%	{
			transform:rotate(0deg);
		}
		100% {
			transform:rotate(360deg);
		}
	}
</style>
</head>

<body>
	<!-- <div class="loading"></div> -->
	<!-- <div id="demo">E:target伪类使用方法	</div> -->
	<!-- <div id="chrome_detect" title="chrome">haha</div> -->
	<!-- <long>hello,world</long> -->

	<input type="text" id="long">
	<span>event.keyCode: <output></output></span>
	<form action="" class="none">
		<!-- <input type="text" id="fei" pattern="\w{3,8}"> -->
		<!-- <item name="item3" class="mark" label="指标类型:" width="50%">
			<dropdown name="metric_type" id="metric_type" valueField="code" textField="name" datafield="formData.metric_type" showClearBtn="false">
				<attr name="rule">{required:true}</attr>
				<attr name="dataset">{"source": {"url" : "services/saasDictItemSearch?class_code=METRIC_TYPE"}}</attr>
			</dropdown>
		</item> -->
		<br>
		<button type="submit">提交</button>
		<input type="text" id="inputText" value="测试文本" />
		<button class="btn">复制文本框内容</button>
		<button type="button" onclick="copyToClipboard(this.innerHTML)">复制自身</button>
	</form>
</body>

<script>
/*var instance = axios.create({
  baseURL: 'http://rapapi.org/mockjs/31038',
  timeout: 1000,
  // headers: {'X-Custom-Header': 'foobar'}
});
instance.get('/long/first').then(res=>console.log(res.data))*/
/*function* foo(x) {
  var y = 2 * (yield x + 1);
  var z = yield y / 3;
  return (x + y + z);
}

var a = foo(5);
console.log(a.next()) // Object{value:6, done:false}
console.log(a.next()) // Object{value:NaN, done:false}
console.log(a.next()) // Object{value:NaN, done:true}

var b = foo(5);
console.log(b.next()) // { value:6, done:false }
console.log(b.next(12)) // { value:8, done:false }
console.log(b.next(13)) // { value:42, done:true }*/

const isValidJSON = obj => {
  try {
    JSON.parse(obj);
    return true;
  } catch (e) {
    return false;
  }
};
const isArrayLike = val => {
  try {
    return [...val], true;
  } catch (e) {
    return false;
  }
};
const isPlainObject = val => !!val && typeof val === 'object' && val.constructor === Object;
const getURLParameters = url =>
  (url.match(/([^?=&]+)(=([^&]*))/g) || []).reduce(
    (a, v) => ((a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1)), a),
    {}
  );

const hexToRGB = hex => {
  let alpha = false,
    h = hex.slice(hex.startsWith('#') ? 1 : 0);
  if (h.length === 3) h = [...h].map(x => x + x).join('');
  else if (h.length === 8) alpha = true;
  h = parseInt(h, 16);
  return (
    'rgb' +
    (alpha ? 'a' : '') +
    '(' +
    (h >>> (alpha ? 24 : 16)) +
    ', ' +
    ((h & (alpha ? 0x00ff0000 : 0x00ff00)) >>> (alpha ? 16 : 8)) +
    ', ' +
    ((h & (alpha ? 0x0000ff00 : 0x0000ff)) >>> (alpha ? 8 : 0)) +
    (alpha ? `, ${h & 0x000000ff}` : '') +
    ')'
  );
};

const httpGet = (url, callback, err = console.error) => {
  const request = new XMLHttpRequest();
  request.open('GET', url, true);
  request.onload = () => callback(request.responseText);
  request.onerror = () => err(request);
  request.send();
};

const httpPost = (url, data, callback, err = console.error) => {
  const request = new XMLHttpRequest();
  request.open('POST', url, true);
  request.setRequestHeader('Content-type', 'application/json; charset=utf-8');
  request.onload = () => callback(request.responseText);
  request.onerror = () => err(request);
  request.send(data);
};

const isBrowser = () => ![typeof window, typeof document].includes('undefined');

let cookieStr='long=1;fei=2'
const parseCookie = str =>
  str.split(';').map(v => v.split('=')).reduce((acc, v) => {
      acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());
      return acc;
    }, {});
// parseCookie(cookieStr)
const prettyBytes = (num, precision = 3, addSpace = true) => {
  const UNITS = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
  if (Math.abs(num) < 1) return num + (addSpace ? ' ' : '') + UNITS[0];
  const exponent = Math.min(Math.floor(Math.log10(num < 0 ? -num : num) / 3), UNITS.length - 1);
  const n = Number(((num < 0 ? -num : num) / 1000 ** exponent).toPrecision(precision));
  return (num < 0 ? '-' : '') + n + (addSpace ? ' ' : '') + UNITS[exponent];
};
// console.log(prettyBytes(1000))
const RGBToHex = (r, g, b) => ((r << 16) + (g << 8) + b).toString(16).padStart(6, '0');
// console.log(RGBToHex(255, 165, 1)); // 'ffa501'
const toCurrency = (n, curr, LanguageFormat = undefined) =>
  Intl.NumberFormat(LanguageFormat, { style: 'currency', currency: curr }).format(n);
// console.log(toCurrency(123456.789, 'USD', 'en-us')); // $123,456.79  | currency: US Dollar | currencyLangFormat: English (United States)
// console.log(toCurrency(123456.789, 'USD', 'fa')); // ۱۲۳٬۴۵۶٫۷۹ ؜$ | currency: US Dollar | currencyLangFormat: Farsi
const toOrdinalSuffix = num => {
  const int = parseInt(num),
    digits = [int % 10, int % 100],
    ordinals = ['st', 'nd', 'rd', 'th'],
    oPattern = [1, 2, 3, 4],
    tPattern = [11, 12, 13, 14, 15, 16, 17, 18, 19];
  return oPattern.includes(digits[0]) && !tPattern.includes(digits[1])
    ? int + ordinals[digits[0] - 1]
    : int + ordinals[3];
};
const objectFromPairs = arr => arr.reduce((a, v) => (a[v[0]] = v[1], a), {});
objectFromPairs([['a',1],['b',2]])// -> {a: 1, b: 2}
const speak = message => {
  const msg = new SpeechSynthesisUtterance(message);
  msg.voice = window.speechSynthesis.getVoices()[0];
  window.speechSynthesis.speak(msg);
};
// speak('Hello, World');// -> plays the message
// 复制到剪贴板
const copyToClipboard = str => {
  const el = document.createElement('textarea');
  el.value = str;
  el.setAttribute('readonly', '');
  el.style.position = 'absolute';
  el.style.left = '-9999px';
  document.body.appendChild(el);
  const selected =
    document.getSelection().rangeCount > 0 ? document.getSelection().getRangeAt(0) : false;
  el.select();
  document.execCommand('copy');
  document.body.removeChild(el);
  if (selected) {
    document.getSelection().removeAllRanges();
    document.getSelection().addRange(selected);
  }
};

// const compose = (...fns) => fns.reduce((f, g) => (...args) => f(g(...args)));
const compose = function(...fns) {
	return fns.reduce(function (f, g) {
		// console.log(f,g)
		return function(...args) {
			return f(g(...args))
		}
	})
}
/*const add5 = x => x + 5;
const multiply = (x, y) => x * y;
const multiplyAndAdd5 = compose(add5, multiply);
console.log(multiplyAndAdd5(5,2))
console.log(compose(()=>console.log(1),()=>console.log(2),(a,b,c)=>console.log(a,b,c))(1,2))*/
/*Observe(home)
// 创建一个Observe构造函数
// 写数据劫持的主要逻辑
function Observe(data) {
  // 所谓数据劫持就是给对象增加get,set
  // 先遍历一遍对象再说
  for (let key in data) { // 把data属性通过defineProperty的方式定义属性
    let val = data[key];
    observe(val); // 递归继续向下找，实现深度的数据劫持
    Object.defineProperty(data, key, {
      configurable: true,
      get() {
        return val;
      },
      set(newVal) { // 更改值的时候
        if (val === newVal) { // 设置的值和以前值一样就不理它
          return;
        }
        val = newVal; // 如果以后再获取值(get)的时候，将刚才设置的值再返回去
        observe(newVal); // 当设置为新值后，也需要把新值再去定义成属性
      }
    });
  }
}

// 外面再写一个函数
// 不用每次调用都写个new
// 也方便递归调用
function observe(data) {
  // 如果不是对象的话就直接return掉
  // 防止递归溢出
  if (!data || typeof data !== 'object') return;
  return new Observe(data);
}*/


/*const initArr = (end, start = 0) =>
  Array.apply(null, Array(end - start)).map((v, i) => i + start);*/
/*function Fibonacci2 (n , ac1 = 1 , ac2 = 1) {
  if( n <= 1 ) {return ac2};
  console.count();
  console.log(ac2, ac1 + ac2)
  return Fibonacci2 (n - 1, ac2, ac1 + ac2);
}

Fibonacci2(100) // 573147844013817200000
// Fibonacci2(1000) // 7.0330367711422765e+208*/
/*var obj = new Proxy({}, {
  get: function (target, key, receiver) {
    console.log(`getting ${key}!`, target,receiver);
    return Reflect.get(target, key, receiver);
  },
  set: function (target, key, value, receiver) {
    console.log(`setting ${key}: ${value}!`, target,receiver);
    return Reflect.set(target, key, value, receiver);
  }
});
obj.count = 1
//  setting count!
++obj.count
//  getting count!
//  setting count!
//  2*/

/*
// typescript 继承方法
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}, a={a:1,b:2}, aa={c:3,d:4};
__extends(a,aa);*/

// console.log('%clong',"color:#f90")

/*const haha =11;
const o = {a:1, b:22,haha};
let {a: newName1, b: newName2} = o;*/

/*let cc = {a: string, b?: number}
function f({a, b}: cc): void {}
function f({a = "", b} = {b: 0}) {
	console.log(arguments.length,a,b)
}
f({a:22,b:33}); // ok, default to {a: "", b: 0}

// 令人困惑的是，这里的冒号不是指示类型的。 如果你想指定它的类型， 仍然需要 在其后写上完整的模式。
let {a, b}: {a: string, b: number} = o;*/

$(function() {
	$("#long").on("keydown", function(e) {
		$("output").html(e.keyCode);
	})

	// document.styleSheets[0].addRule("body .postTitle", "background-color:red;font-size:16px;")
	/*document.getElementsByClassName('btn') && document.getElementsByClassName('btn')[0].addEventListener('click', function() {
		var inputText = document.getElementById('inputText');
		var currentFocus = document.activeElement;
		inputText.focus();
		inputText.setSelectionRange(0, inputText.value.length);
		document.execCommand('copy', true);
		currentFocus.focus();
	});*/
})

/*class Person {
	@nonenumerable
	get kidCount() {
		return 42;
	}
}
function nonenumerable(target, name, descriptor) {
	descriptor.enumerable = false;
	return descriptor;
}*/
/*var p1 = new Promise((resolve, reject) => {
  setTimeout(resolve, 1000, "one");
});
var p2 = new Promise((resolve, reject) => {
  setTimeout(resolve, 2000, "two");
});
var p3 = new Promise((resolve, reject) => {
  setTimeout(resolve, 3000, "three");
});
var p4 = new Promise((resolve, reject) => {
  setTimeout(resolve, 4000, "four");
});
var p5 = new Promise((resolve, reject) => {
  reject("reject");
});

Promise.all([p1, p2, p3, p4, p5]).then(values => {
  console.log(values);
}, reason => {
  console.log(reason)
});*/

/*var p1 = Promise.resolve(3);
p1.then(value=>console.log(value))
var p2 = 1337;
var p3 = new Promise((resolve, reject) => {
	// console.log(resolve.toString())
	resolve(1,22,3,54,55)
  // setTimeout(resolve, 100, "foo");
});

Promise.all([p1, p2, p3]).then(values => {
  console.log(values); // [3, 1337, 1]
});*/
/*function ll() {
	// console.log([].slice.apply(arguments))
	console.log(arguments)
}
ll.apply(null,[1,2,3]);
ll([1,2,3])
*/

/*for (let i = 0; i < 10 ; i++) {
	setTimeout(function() {console.log(i); }, 100 * i);
}*/
/*let o = {
	a: "foo",
	b: 12,
	c: "bar"
}
let {a, b} = o;
console.log(a,b);*/


/*console.log(new Error("hello world" + o.a));
// throw "hello world" + o.a;
throw new Error("hello world " + o.c)*/

/*var O = {
	name: "long",
	sex: "nan"
}

function Animal(obj) {
	this.name = obj.name;
	this.sex = obj.sex;
	return this;
}
var myo = Animal.call(O, O);*/

/*class long {
	static l() {}
	fei() {
		console.log(123)
	}
}
var lo = {
	l() {
		console.log(1)
	},
	o() {
		console.log("o")
	}
}*/
/*class ll {
	l() {}
}
class ll {
	l() {}
	static f() {
		console.log(1)
	}
}
ll.f = () => {
	console.log(2)
}*/


/*var a = 1,
    b = function a(x) {
    	console.count()
        x && a(--x);
    };
console.log(a)*/

// import haha from "./test";
// haha();
/*var arr = [2, 88, 6, 8, 3, 0, 34, 72];
var sort = {};
sort.insertionSort = function(arr) {
	for (var i = 0; i < arr.length - 1; i++) {
		var insert = arr[i + 1]; //要被插入的元素
		// console.log(insert);
		var index = i + 1; //要被插入的元素的下标
		for (var j = i; j >= 0; j--) {
			//被插入的元素比前面j项元素谁小就插入到谁的前面
			if (insert < arr[j]) {
				arr[j + 1] = arr[j];
				index = j;
			} else {
				break;
			}
			console.count("执行次数");
		}
		arr[index] = insert;
		console.log(arr + "\n");
	}
}
sort.insertionSort(arr);*/

// $('.feif').offsetParent().css('background-color', 'red');

/*var stag =
`<!-- <aa name="dlfk">-->
    <!-- <bfd><f name="fdf"></f></bfd>  -->
<!-- </aa>  -->
<!--<a>
	<b></b
</a>-->`;
var ntag = stag.replace(/(?:<!--\s*<)([\s\S]+?)(?:>\s*-->)+/g, function(sAll,group) {
	// console.count();
	// console.log(i);
	var str = group.match(/[\w-]+/)[0];
	if (group.indexOf("<") > 0) {
		return "<code_" +  group.slice(0, -str.length) + "code_" + str +">";
	} else {
		return "<code_" +  group + ">";
	}
})
// console.log(ntag)*/

/*var ntag = stag.replace(/<!--<\/?([\w-])+/g, function(v,i) {
	return v.substr(4).replace(/([\w-]+)$/, "code_$1");
}).replace(/<\/([\w-]+)>-->/g, "</code_$1>").replace(">-->",">");*/

/*var myFrame = document.createElement('iframe');
document.body.appendChild(myFrame);
var myArray = window.frames[window.frames.length-1].Array;
var arr = new myArray(1,2,10); // [a,b,10]
// myArray 的构造器已经丢失，instanceof 的结果将不正常
// 构造器是不能跨 frame 共享的
console.log(arr instanceof Array)// false*/

/*function getCategory(age) {
	var category = "";
	switch (true) {
		case isNaN(age):
			category = "not an age";
			break;
		case (age >= 50):
			category = "Old";
			break;
		case (age <= 20):
			category = "Baby";
			break;
		default:
			category = "Young";
			break;
	};
	return category;
}
console.log(getCategory(5)); // 将返回 "Baby"*/


/*$(document).on("keydown", function(e) {
	if (e.ctrlKey && event.keyCode === 80) {//ctrl+p 并阻止弹出打印
		e.preventDefault();
		// console.count();
		return false;
	}
})*/
</script>

</html>